{"version":3,"sources":["../src/index.js"],"names":["React","KEYCODE_ENTER","KEYCODE_TAB","KEYCODE_BACKSPACE","KEYCODE_Y","KEYCODE_Z","KEYCODE_M","KEYCODE_PARENS","KEYCODE_BRACKETS","KEYCODE_QUOTE","KEYCODE_BACK_QUOTE","HISTORY_LIMIT","HISTORY_TIME_GAP","isWindows","global","test","navigator","platform","isMacLike","Editor","state","capture","ie","_recordCurrentState","input","_input","value","selectionStart","selectionEnd","_recordChange","_getLines","text","position","substring","split","record","overwrite","_history","stack","offset","length","slice","count","extras","Math","max","timestamp","Date","now","last","re","previous","pop","match","current","startsWith","push","_updateInput","props","onValueChange","_applyEdits","_undoEdit","_redoEdit","min","_handleKeyDown","e","tabSize","insertSpaces","ignoreTabKey","target","tabCharacter","repeat","keyCode","preventDefault","shiftKey","linesBeforeCaret","startLine","endLine","nextValue","map","line","i","join","startLineText","updatedSelection","hasSelection","textBeforeCaret","endsWith","matches","indent","chars","metaKey","ctrlKey","altKey","setState","_handleChange","userAgent","style","padding","highlight","autoFocus","disabled","form","maxLength","minLength","name","readOnly","required","onFocus","onBlur","rest","contentStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","highlighted","styles","container","c","editor","textarea","color","dangerouslySetInnerHTML","__html","children","history","session","Component","defaultProps","textAlign","whiteSpace","wordBreak","boxSizing","top","left","height","width","margin","border","resize","background","overflow","MozOsxFontSmoothing","WebkitFontSmoothing","WebkitTextFillColor","pointerEvents","display","fontFamily","fontSize","fontStyle","fontVariantLigatures","fontWeight","letterSpacing","lineHeight","textIndent","textRendering","textTransform"],"mappings":"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","file":"index.js","sourcesContent":["/* @flow */\n/* global global */\n\nimport * as React from 'react';\n\ntype Props = {\n  // Props for the component\n  value: string,\n  onValueChange: (value: string) => mixed,\n  highlight: (value: string) => string | React.Node,\n  tabSize: number,\n  insertSpaces: boolean,\n  ignoreTabKey: boolean,\n  padding: number | string,\n  style?: {},\n\n  // Props for the textarea\n  autoFocus?: boolean,\n  disabled?: boolean,\n  form?: string,\n  maxLength?: number,\n  minLength?: number,\n  name?: string,\n  readOnly?: boolean,\n  required?: boolean,\n  onFocus?: (e: FocusEvent) => mixed,\n  onBlur?: (e: FocusEvent) => mixed,\n};\n\ntype State = {\n  capture: boolean,\n  ie: boolean,\n};\n\ntype Record = {\n  value: string,\n  selectionStart: number,\n  selectionEnd: number,\n};\n\ntype History = {\n  stack: Array<Record & { timestamp: number }>,\n  offset: number,\n};\n\nconst KEYCODE_ENTER = 13;\nconst KEYCODE_TAB = 9;\nconst KEYCODE_BACKSPACE = 8;\nconst KEYCODE_Y = 89;\nconst KEYCODE_Z = 90;\nconst KEYCODE_M = 77;\nconst KEYCODE_PARENS = 57;\nconst KEYCODE_BRACKETS = 219;\nconst KEYCODE_QUOTE = 222;\nconst KEYCODE_BACK_QUOTE = 192;\n\nconst HISTORY_LIMIT = 100;\nconst HISTORY_TIME_GAP = 3000;\n\nconst isWindows = 'navigator' in global && /Win/i.test(navigator.platform);\nconst isMacLike =\n  'navigator' in global && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n\nexport default class Editor extends React.Component<Props, State> {\n  static defaultProps = {\n    tabSize: 2,\n    insertSpaces: true,\n    ignoreTabKey: false,\n    padding: 0,\n  };\n\n  state = {\n    capture: true,\n    ie: false,\n  };\n\n  componentDidMount() {\n    if (/Trident/.test(navigator.userAgent)) {\n      // The browser is Internet Explorer\n      // eslint-disable-next-line react/no-did-mount-set-state\n      this.setState({ ie: true });\n    }\n\n    this._recordCurrentState();\n  }\n\n  _recordCurrentState = () => {\n    const input = this._input;\n\n    if (!input) return;\n\n    // Save current state of the input\n    const { value, selectionStart, selectionEnd } = input;\n\n    this._recordChange({\n      value,\n      selectionStart,\n      selectionEnd,\n    });\n  };\n\n  _getLines = (text: string, position: number) =>\n    text.substring(0, position).split('\\n');\n\n  _recordChange = (record: Record, overwrite?: boolean = false) => {\n    const { stack, offset } = this._history;\n\n    if (stack.length && offset > -1) {\n      // When something updates, drop the redo operations\n      this._history.stack = stack.slice(0, offset + 1);\n\n      // Limit the number of operations to 100\n      const count = this._history.stack.length;\n\n      if (count > HISTORY_LIMIT) {\n        const extras = count - HISTORY_LIMIT;\n\n        this._history.stack = stack.slice(extras, count);\n        this._history.offset = Math.max(this._history.offset - extras, 0);\n      }\n    }\n\n    const timestamp = Date.now();\n\n    if (overwrite) {\n      const last = this._history.stack[this._history.offset];\n\n      if (last && timestamp - last.timestamp < HISTORY_TIME_GAP) {\n        // A previous entry exists and was in short interval\n\n        // Match the last word in the line\n        const re = /[^a-z0-9]([a-z0-9]+)$/i;\n\n        // Get the previous line\n        const previous = this._getLines(last.value, last.selectionStart)\n          .pop()\n          .match(re);\n\n        // Get the current line\n        const current = this._getLines(record.value, record.selectionStart)\n          .pop()\n          .match(re);\n\n        if (previous && current && current[1].startsWith(previous[1])) {\n          // The last word of the previous line and current line match\n          // Overwrite previous entry so that undo will remove whole word\n          this._history.stack[this._history.offset] = { ...record, timestamp };\n\n          return;\n        }\n      }\n    }\n\n    // Add the new operation to the stack\n    this._history.stack.push({ ...record, timestamp });\n    this._history.offset++;\n  };\n\n  _updateInput = (record: Record) => {\n    const input = this._input;\n\n    if (!input) return;\n\n    // Update values and selection state\n    input.value = record.value;\n    input.selectionStart = record.selectionStart;\n    input.selectionEnd = record.selectionEnd;\n\n    this.props.onValueChange(record.value);\n  };\n\n  _applyEdits = (record: Record) => {\n    // Save last selection state\n    const input = this._input;\n    const last = this._history.stack[this._history.offset];\n\n    if (last && input) {\n      this._history.stack[this._history.offset] = {\n        ...last,\n        selectionStart: input.selectionStart,\n        selectionEnd: input.selectionEnd,\n      };\n    }\n\n    // Save the changes\n    this._recordChange(record);\n    this._updateInput(record);\n  };\n\n  _undoEdit = () => {\n    const { stack, offset } = this._history;\n\n    // Get the previous edit\n    const record = stack[offset - 1];\n\n    if (record) {\n      // Apply the changes and update the offset\n      this._updateInput(record);\n      this._history.offset = Math.max(offset - 1, 0);\n    }\n  };\n\n  _redoEdit = () => {\n    const { stack, offset } = this._history;\n\n    // Get the next edit\n    const record = stack[offset + 1];\n\n    if (record) {\n      // Apply the changes and update the offset\n      this._updateInput(record);\n      this._history.offset = Math.min(offset + 1, stack.length - 1);\n    }\n  };\n\n  _handleKeyDown = (e: *) => {\n    const { tabSize, insertSpaces, ignoreTabKey } = this.props;\n    const { value, selectionStart, selectionEnd } = e.target;\n\n    const tabCharacter = (insertSpaces ? ' ' : '     ').repeat(tabSize);\n\n    if (e.keyCode === KEYCODE_TAB && !ignoreTabKey && this.state.capture) {\n      // Prevent focus change\n      e.preventDefault();\n\n      if (e.shiftKey) {\n        // Unindent selected lines\n        const linesBeforeCaret = this._getLines(value, selectionStart);\n        const startLine = linesBeforeCaret.length - 1;\n        const endLine = this._getLines(value, selectionEnd).length - 1;\n        const nextValue = value\n          .split('\\n')\n          .map((line, i) => {\n            if (\n              i >= startLine &&\n              i <= endLine &&\n              line.startsWith(tabCharacter)\n            ) {\n              return line.substring(tabCharacter.length);\n            }\n\n            return line;\n          })\n          .join('\\n');\n\n        if (value !== nextValue) {\n          const startLineText = linesBeforeCaret[startLine];\n\n          this._applyEdits({\n            value: nextValue,\n            // Move the start cursor if first line in selection was modified\n            // It was modified only if it started with a tab\n            selectionStart: startLineText.startsWith(tabCharacter)\n              ? selectionStart - tabCharacter.length\n              : selectionStart,\n            // Move the end cursor by total number of characters removed\n            selectionEnd: selectionEnd - (value.length - nextValue.length),\n          });\n        }\n      } else if (selectionStart !== selectionEnd) {\n        // Indent selected lines\n        const linesBeforeCaret = this._getLines(value, selectionStart);\n        const startLine = linesBeforeCaret.length - 1;\n        const endLine = this._getLines(value, selectionEnd).length - 1;\n        const startLineText = linesBeforeCaret[startLine];\n\n        this._applyEdits({\n          value: value\n            .split('\\n')\n            .map((line, i) => {\n              if (i >= startLine && i <= endLine) {\n                return tabCharacter + line;\n              }\n\n              return line;\n            })\n            .join('\\n'),\n          // Move the start cursor by number of characters added in first line of selection\n          // Don't move it if it there was no text before cursor\n          selectionStart: /\\S/.test(startLineText)\n            ? selectionStart + tabCharacter.length\n            : selectionStart,\n          // Move the end cursor by total number of characters added\n          selectionEnd:\n            selectionEnd + tabCharacter.length * (endLine - startLine + 1),\n        });\n      } else {\n        const updatedSelection = selectionStart + tabCharacter.length;\n\n        this._applyEdits({\n          // Insert tab character at caret\n          value:\n            value.substring(0, selectionStart) +\n            tabCharacter +\n            value.substring(selectionEnd),\n          // Update caret position\n          selectionStart: updatedSelection,\n          selectionEnd: updatedSelection,\n        });\n      }\n    } else if (e.keyCode === KEYCODE_BACKSPACE) {\n      const hasSelection = selectionStart !== selectionEnd;\n      const textBeforeCaret = value.substring(0, selectionStart);\n\n      if (textBeforeCaret.endsWith(tabCharacter) && !hasSelection) {\n        // Prevent default delete behaviour\n        e.preventDefault();\n\n        const updatedSelection = selectionStart - tabCharacter.length;\n\n        this._applyEdits({\n          // Remove tab character at caret\n          value:\n            value.substring(0, selectionStart - tabCharacter.length) +\n            value.substring(selectionEnd),\n          // Update caret position\n          selectionStart: updatedSelection,\n          selectionEnd: updatedSelection,\n        });\n      }\n    } else if (e.keyCode === KEYCODE_ENTER) {\n      // Ignore selections\n      if (selectionStart === selectionEnd) {\n        // Get the current line\n        const line = this._getLines(value, selectionStart).pop();\n        const matches = line.match(/^\\s+/);\n\n        if (matches && matches[0]) {\n          e.preventDefault();\n\n          // Preserve indentation on inserting a new line\n          const indent = '\\n' + matches[0];\n          const updatedSelection = selectionStart + indent.length;\n\n          this._applyEdits({\n            // Insert indentation character at caret\n            value:\n              value.substring(0, selectionStart) +\n              indent +\n              value.substring(selectionEnd),\n            // Update caret position\n            selectionStart: updatedSelection,\n            selectionEnd: updatedSelection,\n          });\n        }\n      }\n    } else if (\n      e.keyCode === KEYCODE_PARENS ||\n      e.keyCode === KEYCODE_BRACKETS ||\n      e.keyCode === KEYCODE_QUOTE ||\n      e.keyCode === KEYCODE_BACK_QUOTE\n    ) {\n      let chars;\n\n      if (e.keyCode === KEYCODE_PARENS && e.shiftKey) {\n        chars = ['(', ')'];\n      } else if (e.keyCode === KEYCODE_BRACKETS) {\n        if (e.shiftKey) {\n          chars = ['{', '}'];\n        } else {\n          chars = ['[', ']'];\n        }\n      } else if (e.keyCode === KEYCODE_QUOTE) {\n        if (e.shiftKey) {\n          chars = ['\"', '\"'];\n        } else {\n          chars = [\"'\", \"'\"];\n        }\n      } else if (e.keyCode === KEYCODE_BACK_QUOTE && !e.shiftKey) {\n        chars = ['`', '`'];\n      }\n\n      // If text is selected, wrap them in the characters\n      if (selectionStart !== selectionEnd && chars) {\n        e.preventDefault();\n\n        this._applyEdits({\n          value:\n            value.substring(0, selectionStart) +\n            chars[0] +\n            value.substring(selectionStart, selectionEnd) +\n            chars[1] +\n            value.substring(selectionEnd),\n          // Update caret position\n          selectionStart,\n          selectionEnd: selectionEnd + 2,\n        });\n      }\n    } else if (\n      (isMacLike\n        ? // Trigger undo with ⌘+Z on Mac\n          e.metaKey && e.keyCode === KEYCODE_Z\n        : // Trigger undo with Ctrl+Z on other platforms\n          e.ctrlKey && e.keyCode === KEYCODE_Z) &&\n      !e.shiftKey &&\n      !e.altKey\n    ) {\n      e.preventDefault();\n\n      this._undoEdit();\n    } else if (\n      (isMacLike\n        ? // Trigger redo with ⌘+Shift+Z on Mac\n          e.metaKey && e.keyCode === KEYCODE_Z && e.shiftKey\n        : isWindows\n          ? // Trigger redo with Ctrl+Y on Windows\n            e.ctrlKey && e.keyCode === KEYCODE_Y\n          : // Trigger redo with Ctrl+Shift+Z on other platforms\n            e.ctrlKey && e.keyCode === KEYCODE_Z && e.shiftKey) &&\n      !e.altKey\n    ) {\n      e.preventDefault();\n\n      this._redoEdit();\n    } else if (\n      e.keyCode === KEYCODE_M &&\n      e.ctrlKey &&\n      (isMacLike ? e.shiftKey : true)\n    ) {\n      e.preventDefault();\n\n      // Toggle capturing tab key so users can focus away\n      this.setState(state => ({\n        capture: !state.capture,\n      }));\n    }\n  };\n\n  _handleChange = (e: *) => {\n    const { value, selectionStart, selectionEnd } = e.target;\n\n    this._recordChange(\n      {\n        value,\n        selectionStart,\n        selectionEnd,\n      },\n      true\n    );\n\n    this.props.onValueChange(value);\n  };\n\n  _history: History = {\n    stack: [],\n    offset: -1,\n  };\n\n  _input: ?HTMLTextAreaElement;\n\n  get session() {\n    return {\n      history: this._history,\n    };\n  }\n\n  set session(session: { history: History }) {\n    this._history = session.history;\n  }\n\n  render() {\n    const {\n      value,\n      style,\n      padding,\n      highlight,\n      autoFocus,\n      disabled,\n      form,\n      maxLength,\n      minLength,\n      name,\n      readOnly,\n      required,\n      onFocus,\n      onBlur,\n      /* eslint-disable no-unused-vars */\n      onValueChange,\n      tabSize,\n      insertSpaces,\n      ignoreTabKey,\n      /* eslint-enable no-unused-vars */\n      ...rest\n    } = this.props;\n\n    const contentStyle = {\n      paddingTop: padding,\n      paddingRight: padding,\n      paddingBottom: padding,\n      paddingLeft: padding,\n    };\n\n    const highlighted = highlight(value);\n\n    return (\n      <div {...rest} style={{ ...styles.container, ...style }}>\n        <textarea\n          ref={c => (this._input = c)}\n          style={{\n            ...styles.editor,\n            ...styles.textarea,\n            ...contentStyle,\n            // IE doesn't support `-webkit-text-fill-color`\n            // Setting `color: transparent` is fine on IE because it doesn't affect caret color\n            ...(this.state.ie ? { color: 'transparent' } : null),\n          }}\n          value={value}\n          onChange={this._handleChange}\n          onKeyDown={this._handleKeyDown}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          disabled={disabled}\n          form={form}\n          maxLength={maxLength}\n          minLength={minLength}\n          name={name}\n          readOnly={readOnly}\n          required={required}\n          autoFocus={autoFocus}\n          autoCapitalize=\"off\"\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          spellCheck={false}\n          data-gramm={false}\n        />\n        <pre\n          aria-hidden=\"true\"\n          style={{ ...styles.editor, ...styles.highlight, ...contentStyle }}\n          {...(typeof highlighted === 'string'\n            ? { dangerouslySetInnerHTML: { __html: highlighted + '<br />' } }\n            : { children: highlighted })}\n        />\n      </div>\n    );\n  }\n}\n\nconst styles = {\n  container: {\n    position: 'relative',\n    textAlign: 'left',\n    whiteSpace: 'pre-wrap',\n    wordBreak: 'keep-all',\n    boxSizing: 'border-box',\n    padding: 0,\n  },\n  textarea: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    margin: 0,\n    border: 0,\n    resize: 'none',\n    background: 'none',\n    overflow: 'hidden',\n    color: 'inherit',\n    MozOsxFontSmoothing: 'grayscale',\n    WebkitFontSmoothing: 'antialiased',\n    WebkitTextFillColor: 'transparent',\n  },\n  highlight: {\n    position: 'relative',\n    margin: 0,\n    border: 0,\n    pointerEvents: 'none',\n  },\n  editor: {\n    boxSizing: 'inherit',\n    display: 'inherit',\n    fontFamily: 'inherit',\n    fontSize: 'inherit',\n    fontStyle: 'inherit',\n    fontVariantLigatures: 'inherit',\n    fontWeight: 'inherit',\n    letterSpacing: 'inherit',\n    lineHeight: 'inherit',\n    tabSize: 'inherit',\n    textIndent: 'inherit',\n    textRendering: 'inherit',\n    textTransform: 'inherit',\n    whiteSpace: 'inherit',\n    wordBreak: 'inherit',\n  },\n};\n"]}